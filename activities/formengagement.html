<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forms</title>
    <link rel="stylesheet" href="formengagement.css">
</head>
<body>
    <header>
        <h1>Ammon's Web Design Site</h1>
    </header>
    <main>
            <h1>Forms</h1>
        <form action="formprocess.html" method="post" id="myform">
            <fieldset>
                <div class="form-row">
                    <label for="fname">Full Name:</label>
                    <input type="text" name="fullname" id="fname">
                </div>
                <div class="form-row">
                    <label for="Email">Email:</label>
                    <input type="Email" name="Email" id="Email">
                </div>
                <div class="form-row">
                    <label for="pass">Password:</label>
                    <input type="Password" name="pass" id="pass">
                </div>
                <div class="form-row">
                    <label for="state">State:</label>
                    <select name="state" id="state">
                        <option value="blank">---</option>
                        <option value="CA">Califonia</option>
                        <option value="HI">Hawaii</option>
                        <option value="UT">Utah</option>
                    </select>
                </div>
                <div class="check-row">
                    <div class="spacer"></div>
                    <label><input type="checkbox" checked>I agree to the terms.</label>
                </div>
                <div class="check-row">
                    <div class="spacer">gender:</div>
                    <label><input type="radio" name="Gender" value="male">Male</label>
                    <label><input type="radio" name="Gender" value="male">Female</label>
                </div>
                <div class="form-row">
                    <label for="comments">Comments:</label>
                    <textarea name="comment" id="comment"></textarea>
                </div class="form-row">
                    <div class="spacer"></div>
                    <input type="submit" value="Sign Up">
           </fieldset>
        </form>
    </main>
        <h3>What is AJAX?</h3>
        <p>AJAX is a method that lets a webpage send or receive information from the server without refreshing the whole page. It makes the website work faster and feel smoother because only small parts of the page change instead of loading everything again.</p>
        <h3>Why do you put your JS Code in a separate file?</h3>
        <p>We put JavaScript in a separate file to keep our HTML neat and clean. It is easier to read, easier to fix, and we can use the same JS file on many pages. The website also loads faster because the browser saves the file. This is the normal and professional way of writing web code.</p>
    <footer>
        <p>&copy; 2025 Ammon Nulu</p>
    </footer>
    <script>
        document.getElementById('myform').addEventListener('submit', function(event) {
            event.preventDefault();
            alert("Form Submitted");

            const fullname = document.getElementById('fullname').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('pass').value;
            const age = document.getElementById('age').value;

            if (!fullname || !email) {
                alert("You need a name and email.");
                return;
            }
            if (!age || age < 18) {
                alert("You need to be 18.");
                return;
            }
            const formData = {
                name: fullname,
                email: email,
                password: password,
                age: age
            };
            console.log(formData);
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "submit.json", true); 
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    alert("Form submitted successfully!");
                    const response = JSON.parse(xhr.responseText);
                    console.log(response);

                    document.getElementById('myform').innerHTML = '';
                    document.getElementById('message').innerText = response.message;
                
                } else if (xhr.readyState === 4 && xhr.status !== 200) {
                    alert("Error submitting form.");
                }
            };
            xhr.send(JSON.stringify(formData));
        });
    </script>
</body>
</html>